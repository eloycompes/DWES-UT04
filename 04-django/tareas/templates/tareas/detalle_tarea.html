<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle de tarea</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<div class="container">

    <h1 class="mb-4">{{ tarea.titulo }}</h1>

    <div class="card p-4 mb-4">
        <p><strong>Descripción:</strong> {{ tarea.descripcion }}</p>
        <p><strong>Tipo:</strong> {{ tarea.tipo }}</p>
        <p><strong>Fecha entrega:</strong> {{ tarea.fecha_entrega }}</p>
        <p><strong>Requiere validación profesor:</strong> {{ tarea.requiere_validacion_profesor }}</p>
        <p><strong>Creador:</strong> {{ tarea.creador }}</p>

        <p><strong>Colaboradores:</strong></p>
        <ul>
            {% for col in tarea.colaboradores.all %}
                <li>{{ col }}</li>
            {% endfor %}
        </ul>

        <p><strong>Estado:</strong></p>

        {% if tarea.requiere_validacion_profesor %}
            {% if tarea.validada_por_profesor %}
                <span class="badge bg-success">Validada</span>
            {% else %}
                <span class="badge bg-danger">No validada</span>
            {% endif %}
        {% else %}
            {% if tarea.completada_por_alumno %}
                <span class="badge bg-success">Validada</span>
            {% else %}
                <span class="badge bg-danger">No validada</span>
            {% endif %}
        {% endif %}

    </div>

    {% if not tarea.requiere_validacion_profesor %}
        <a href="{% url 'completar_tarea' tarea.id %}" class="btn btn-primary">Marcar como completada</a>
    {% endif %}

    {% if tarea.requiere_validacion_profesor and tarea.profesor_validador == request.user %}
        <a href="{% url 'validar_tarea' tarea.id %}" class="btn btn-success">Validar tarea</a>
    {% endif %}

    <a href="{% url 'mis_tareas' %}" class="btn btn-secondary mt-3 d-block" style="width: 100px;">Volver</a>

</div>

</body>
</html>
